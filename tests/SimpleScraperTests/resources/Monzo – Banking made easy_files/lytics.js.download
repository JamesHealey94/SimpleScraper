!function e(t,r,o){function n(a,s){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){var r=t[a][1][e];return n(r?r:e)},c,c.exports,e,t,r,o)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)n(o[a]);return n}({1:[function(e,t,r){"use strict";var o=e("browser-request"),n=e("cookies-js"),i=e("uuid"),a={API:"https://internal-api.monzo.com",ClientId:"",ClientSecret:"",lastAuth:new Date(0),authing:!1,authCallbacks:[],storageCache:{},isLocalStorageSupported:function(){var e="test",t=window.localStorage;if("undefined"==typeof t)return!1;try{return t.setItem(e,"1"),t.removeItem(e),!0}catch(r){return!1}},store:function(e,t){a.storageCache[e]=t,this.isLocalStorageSupported()&&window.localStorage.setItem("mondoAnalytics:"+e,t),n.set("mondoAnalytics_"+e,t,{expires:1/0})},retrieve:function(e){var t=a.storageCache[e];return null!=t?t:(this.isLocalStorageSupported()?(t=window.localStorage.getItem("mondoAnalytics:"+e),null!=t?n.set("mondoAnalytics_"+e,t,{expires:1/0}):(t=n.get("mondoAnalytics_"+e),null!=t&&window.localStorage.setItem("mondoAnalytics:"+e,t))):t=n.get("mondoAnalytics_"+e),null!=t&&(a.storageCache[e]=t),t||"")},auth:function(e,t){this.authCallbacks.push(e);var r=new Date;this.authing||r-this.lastAuth<3e5||(this.authing=!0,delete t.Authorization,o({uri:a.API+"/oauth2/token",method:"POST",headers:t,form:{grant_type:"client_credentials",client_id:this.ClientId,client_secret:this.ClientSecret},json:!0,followRedirect:!1},function(e,t,r){if(a.authing=!1,null==e){a.store("accessToken",r.access_token),a.lastAuth=new Date;for(var o=0;o<a.authCallbacks.length;o++)a.authCallbacks[o]();a.authCallbacks=[]}}))},sendRaw:function(e,t){null==t&&(t={});var r=function(){t.Authorization="Bearer "+a.retrieve("accessToken"),o({uri:a.API+"/analytics/track",method:"POST",headers:t,json:!0,body:e,followRedirect:!1},function(e,o){401===o.statusCode&&a.auth(r,t)})};""===a.retrieve("accessToken")?this.auth(r,t):r()},augmentData:function(e){return null==e&&(e={}),e.referrer=document.referrer,e.user_languages=navigator.languages||[navigator.language],e},augmentHeaders:function(e){null==e&&(e={});var t=a.retrieve("sessionId");return""===t&&(t=i.v4(),a.store("sessionId",t)),e["Mondo-Session"]=t,e},event:function(e,t){t=this.augmentData(t);var r=this.augmentHeaders({});return this.sendRaw({events:[{name:e,data:t}]},r)},pageview:function(){return this.event("pageview",{url:window.location.href})}};window.Analytics=a,t.exports=a},{"browser-request":2,"cookies-js":3,uuid:5}],2:[function(e,t,r){!function(e,o){"function"==typeof define&&define.amd?define([],o):"object"==typeof r?t.exports=o():e.returnExports=o()}(this,function(){function e(n,i){if("function"!=typeof i)throw new Error("Bad callback given: "+i);if(!n)throw new Error("No options given");var s=n.onResponse;if(n="string"==typeof n?{uri:n}:JSON.parse(JSON.stringify(n)),n.onResponse=s,n.verbose&&(e.log=o()),n.url&&(n.uri=n.url,delete n.url),!n.uri&&""!==n.uri)throw new Error("options.uri is a required argument");if("string"!=typeof n.uri)throw new Error("options.uri must be a string");for(var u=["proxy","_redirectsFollowed","maxRedirects","followRedirect"],c=0;c<u.length;c++)if(n[u[c]])throw new Error("options."+u[c]+" is not supported");if(n.callback=i,n.method=n.method||"GET",n.headers=n.headers||{},n.body=n.body||null,n.timeout=n.timeout||e.DEFAULT_TIMEOUT,n.headers.host)throw new Error("Options.headers.host is not supported");n.json&&(n.headers.accept=n.headers.accept||"application/json","GET"!==n.method&&(n.headers["content-type"]="application/json"),"boolean"!=typeof n.json?n.body=JSON.stringify(n.json):"string"!=typeof n.body&&(n.body=JSON.stringify(n.body)));var d=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.join("&")};if(n.qs){var f="string"==typeof n.qs?n.qs:d(n.qs);n.uri.indexOf("?")!==-1?n.uri=n.uri+"&"+f:n.uri=n.uri+"?"+f}var l=function(e){var t={};t.boundry="-------------------------------"+Math.floor(1e9*Math.random());var r=[];for(var o in e)e.hasOwnProperty(o)&&r.push("--"+t.boundry+'\nContent-Disposition: form-data; name="'+o+'"\n\n'+e[o]+"\n");return r.push("--"+t.boundry+"--"),t.body=r.join(""),t.length=t.body.length,t.type="multipart/form-data; boundary="+t.boundry,t};if(n.form){if("string"==typeof n.form)throw"form name unsupported";if("POST"===n.method){var p=(n.encoding||"application/x-www-form-urlencoded").toLowerCase();switch(n.headers["content-type"]=p,p){case"application/x-www-form-urlencoded":n.body=d(n.form).replace(/%20/g,"+");break;case"multipart/form-data":var h=l(n.form);n.body=h.body,n.headers["content-type"]=h.type;break;default:throw new Error("unsupported encoding:"+p)}}}return n.onResponse=n.onResponse||r,n.onResponse===!0&&(n.onResponse=i,n.callback=r),!n.headers.authorization&&n.auth&&(n.headers.authorization="Basic "+a(n.auth.username+":"+n.auth.password)),t(n)}function t(t){function r(){f=!0;var r=new Error("ETIMEDOUT");return r.code="ETIMEDOUT",r.duration=t.timeout,e.log.error("Timeout",{id:d._id,milliseconds:t.timeout}),t.callback(r,d)}function o(r){if(f)return e.log.debug("Ignoring timed out state change",{state:d.readyState,id:d.id});if(e.log.debug("State change",{state:d.readyState,id:d.id,timed_out:f}),d.readyState===s.OPENED){e.log.debug("Request started",{id:d.id});for(var o in t.headers)d.setRequestHeader(o,t.headers[o])}else d.readyState===s.HEADERS_RECEIVED?n():d.readyState===s.LOADING?(n(),a()):d.readyState===s.DONE&&(n(),a(),u())}function n(){if(!g.response){if(g.response=!0,e.log.debug("Got response",{id:d.id,status:d.status}),clearTimeout(d.timeoutTimer),d.statusCode=d.status,l&&0==d.statusCode){var r=new Error("CORS request rejected: "+t.uri);return r.cors="rejected",g.loading=!0,g.end=!0,t.callback(r,d)}t.onResponse(null,d)}}function a(){g.loading||(g.loading=!0,e.log.debug("Response body loading",{id:d.id}))}function u(){if(!g.end){if(g.end=!0,e.log.debug("Request done",{id:d.id}),d.body=d.responseText,t.json)try{d.body=JSON.parse(d.responseText)}catch(r){return t.callback(r,d)}t.callback(null,d,d.body)}}var d=new s,f=!1,l=i(t.uri),p="withCredentials"in d;if(c+=1,d.seq_id=c,d.id=c+": "+t.method+" "+t.uri,d._id=d.id,l&&!p){var h=new Error("Browser does not support cross-origin request: "+t.uri);return h.cors="unsupported",t.callback(h,d)}d.timeoutTimer=setTimeout(r,t.timeout);var g={response:!1,loading:!1,end:!1};return d.onreadystatechange=o,d.open(t.method,t.uri,!0),l&&(d.withCredentials=!!t.withCredentials),d.send(t.body),d}function r(){}function o(){var e,t,o={},i=["trace","debug","info","warn","error"];for(t=0;t<i.length;t++)e=i[t],o[e]=r,"undefined"!=typeof console&&console&&console[e]&&(o[e]=n(console,e));return o}function n(e,t){function r(r,o){return"object"==typeof o&&(r+=" "+JSON.stringify(o)),e[t].call(e,r)}return r}function i(e){var t,r=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/;try{t=location.href}catch(o){t=document.createElement("a"),t.href="",t=t.href}var n=r.exec(t.toLowerCase())||[],i=r.exec(e.toLowerCase()),a=!(!i||i[1]==n[1]&&i[2]==n[2]&&(i[3]||("http:"===i[1]?80:443))==(n[3]||("http:"===n[1]?80:443)));return a}function a(e){var t,r,o,n,i,a,s,u,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d=0,f=0,l="",p=[];if(!e)return e;do t=e.charCodeAt(d++),r=e.charCodeAt(d++),o=e.charCodeAt(d++),u=t<<16|r<<8|o,n=u>>18&63,i=u>>12&63,a=u>>6&63,s=63&u,p[f++]=c.charAt(n)+c.charAt(i)+c.charAt(a)+c.charAt(s);while(d<e.length);switch(l=p.join(""),e.length%3){case 1:l=l.slice(0,-2)+"==";break;case 2:l=l.slice(0,-1)+"="}return l}var s=XMLHttpRequest;if(!s)throw new Error("missing XMLHttpRequest");e.log={trace:r,debug:r,info:r,warn:r,error:r};var u=18e4,c=0;e.withCredentials=!1,e.DEFAULT_TIMEOUT=u,e.defaults=function(t,r){var o=function(e){var r=function(r,o){r="string"==typeof r?{uri:r}:JSON.parse(JSON.stringify(r));for(var n in t)void 0===r[n]&&(r[n]=t[n]);return e(r,o)};return r},n=o(e);return n.get=o(e.get),n.post=o(e.post),n.put=o(e.put),n.head=o(e.head),n};var d=["get","put","post","head"];return d.forEach(function(t){var r=t.toUpperCase(),o=t.toLowerCase();e[o]=function(t){"string"==typeof t?t={method:r,uri:t}:(t=JSON.parse(JSON.stringify(t)),t.method=r);var o=[t].concat(Array.prototype.slice.apply(arguments,[1]));return e.apply(this,o)}}),e.couch=function(t,o){function n(e,t,r){if(e)return o(e,t,r);if((t.statusCode<200||t.statusCode>299)&&r.error){e=new Error("CouchDB error: "+(r.error.reason||r.error.error));for(var n in r)e[n]=r[n];return o(e,t,r)}return o(e,t,r)}"string"==typeof t&&(t={uri:t}),t.json=!0,t.body&&(t.json=t.body),delete t.body,o=o||r;var i=e(t,n);return i},e})},{}],3:[function(e,t,r){!function(e,o){"use strict";var n=function(e){if("object"!=typeof e.document)throw new Error("Cookies.js requires a `window` with a `document` object");var t=function(e,r,o){return 1===arguments.length?t.get(e):t.set(e,r,o)};return t._document=e.document,t._cacheKeyPrefix="cookey.",t._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),t.defaults={path:"/",secure:!1},t.get=function(e){t._cachedDocumentCookie!==t._document.cookie&&t._renewCache();var r=t._cache[t._cacheKeyPrefix+e];return r===o?o:decodeURIComponent(r)},t.set=function(e,r,n){return n=t._getExtendedOptions(n),n.expires=t._getExpiresDate(r===o?-1:n.expires),t._document.cookie=t._generateCookieString(e,r,n),t},t.expire=function(e,r){return t.set(e,o,r)},t._getExtendedOptions=function(e){return{path:e&&e.path||t.defaults.path,domain:e&&e.domain||t.defaults.domain,expires:e&&e.expires||t.defaults.expires,secure:e&&e.secure!==o?e.secure:t.defaults.secure}},t._isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},t._getExpiresDate=function(e,r){if(r=r||new Date,"number"==typeof e?e=e===1/0?t._maxExpireDate:new Date(r.getTime()+1e3*e):"string"==typeof e&&(e=new Date(e)),e&&!t._isValidDate(e))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return e},t._generateCookieString=function(e,t,r){e=e.replace(/[^#$&+\^`|]/g,encodeURIComponent),e=e.replace(/\(/g,"%28").replace(/\)/g,"%29"),t=(t+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),r=r||{};var o=e+"="+t;return o+=r.path?";path="+r.path:"",o+=r.domain?";domain="+r.domain:"",o+=r.expires?";expires="+r.expires.toUTCString():"",o+=r.secure?";secure":""},t._getCacheFromString=function(e){for(var r={},n=e?e.split("; "):[],i=0;i<n.length;i++){var a=t._getKeyValuePairFromCookieString(n[i]);r[t._cacheKeyPrefix+a.key]===o&&(r[t._cacheKeyPrefix+a.key]=a.value)}return r},t._getKeyValuePairFromCookieString=function(e){var t=e.indexOf("=");t=t<0?e.length:t;var r,o=e.substr(0,t);try{r=decodeURIComponent(o)}catch(n){console&&"function"==typeof console.error&&console.error('Could not decode cookie with key "'+o+'"',n)}return{key:r,value:e.substr(t+1)}},t._renewCache=function(){t._cache=t._getCacheFromString(t._document.cookie),t._cachedDocumentCookie=t._document.cookie},t._areEnabled=function(){var e="cookies.js",r="1"===t.set(e,1).get(e);return t.expire(e),r},t.enabled=t._areEnabled(),t},i="object"==typeof e.document?n(e):n;"function"==typeof define&&define.amd?define(function(){return i}):"object"==typeof r?("object"==typeof t&&"object"==typeof t.exports&&(r=t.exports=i),r.Cookies=i):e.Cookies=i}("undefined"==typeof window?this:window)},{}],4:[function(e,t,r){(function(e){var r,o=e.crypto||e.msCrypto;if(o&&o.getRandomValues){var n=new Uint8Array(16);r=function(){return o.getRandomValues(n),n}}if(!r){var i=new Array(16);r=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}t.exports=r}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,t,r){function o(e,t,r){var o=t&&r||0,n=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){n<16&&(t[o+n++]=c[e])});n<16;)t[o+n++]=0;return t}function n(e,t){var r=t||0,o=u;return o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]+"-"+o[e[r++]]+o[e[r++]]+"-"+o[e[r++]]+o[e[r++]]+"-"+o[e[r++]]+o[e[r++]]+"-"+o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]}function i(e,t,r){var o=t&&r||0,i=t||[];e=e||{};var a=void 0!==e.clockseq?e.clockseq:p,s=void 0!==e.msecs?e.msecs:(new Date).getTime(),u=void 0!==e.nsecs?e.nsecs:g+1,c=s-h+(u-g)/1e4;if(c<0&&void 0===e.clockseq&&(a=a+1&16383),(c<0||s>h)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=s,g=u,p=a,s+=122192928e5;var d=(1e4*(268435455&s)+u)%4294967296;i[o++]=d>>>24&255,i[o++]=d>>>16&255,i[o++]=d>>>8&255,i[o++]=255&d;var f=s/4294967296*1e4&268435455;i[o++]=f>>>8&255,i[o++]=255&f,i[o++]=f>>>24&15|16,i[o++]=f>>>16&255,i[o++]=a>>>8|128,i[o++]=255&a;for(var m=e.node||l,y=0;y<6;y++)i[o+y]=m[y];return t?t:n(i)}function a(e,t,r){var o=t&&r||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var i=e.random||(e.rng||s)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var a=0;a<16;a++)t[o+a]=i[a];return t||n(i)}for(var s=e("./rng"),u=[],c={},d=0;d<256;d++)u[d]=(d+256).toString(16).substr(1),c[u[d]]=d;var f=s(),l=[1|f[0],f[1],f[2],f[3],f[4],f[5]],p=16383&(f[6]<<8|f[7]),h=0,g=0,m=a;m.v1=i,m.v4=a,m.parse=o,m.unparse=n,t.exports=m},{"./rng":4}]},{},[1]);
